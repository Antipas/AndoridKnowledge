[ARouter](https://yq.aliyun.com/articles/71687?spm=5176.100240.searchblog.7.8os9Go#)
===

* 直接解析URL路由，解析参数并赋值到对应目标字段的页面中。
* 支持多模块项目，通过group分组按需加载。ARouter允许某一个模块下有多个分组，所有的分组最终会被一个root节点管理
* 允许自定义拦截器，ARouter是支持拦截器的，而拦截器其实就是AOP的实现，可以自定义多个拦截器解决一些面向行为编程上出现的问题。
* extras是int用于标记拦截器额开关，int本身在Java中是由4个字节实现的，每个字节是8位，所以一共是32个标志位，去除掉符号位还剩下31个，也就是说转化成为二进制之后，一个int中可以配置31个1或者0，而每一个0或者1都可以表示一项配置。位运算的速度要远远高于字符串比对以及其他的方式的，而且一个int值就可以提供31个开关
* ARouter可以提供IoC容器，IoC其实就是控制反转。将一部分功能和组件封装起来成为接口，以接口的形式对外提供能力，所以在这部分就可以将每个功能作为一个Service，而Service的实现就是具体的业务功能，这部分也需要通过IoC容器进行获取。
* 映射关系自动注册。方式是在编译期处理被注解的类，而可以做到在运行中尽可能不使用反射。其实这一部分就是注解处理器，注解处理器其实是作用在JVM上的，可以通过插入一部分代码来处理被注解标注的类。
* 灵活的降级策略。原生页面变成H5.
* 使用Processor在编译器读取注解的Activity和注解的path，使用javapoet生成ARouter$$Group$$path 文件 里面保存页面的路由信息
* 依赖注入。ARouter.inject(this)，将自身的实例传递进去。ARouter会查找到编译期为调用方生成的注入辅助类，而这里提到的注入辅助类就是比方在编译期是扫描到一个A页面需要进行自动装配，此时就会为A页面生成一个注入辅助类。联想Butterknife、EventBus、Dagger。

```java
/**
     * DO NOT EDIT THIS FILE!!! IT WAS GENERATED BY AROUTER. */
    public class ARouter$$Group$$study implements IRouteGroup {
      @Override
      public void loadInto(Map<String, RouteMeta> atlas) {
        atlas.put("/study/tab", RouteMeta.build(RouteType.ACTIVITY, TabActivity.class, "/study/tab", "study", null, -1, -2147483648));
        atlas.put("/study/testargs", RouteMeta.build(RouteType.ACTIVITY, TestArgsActivity.class, "/study/testargs", "study", null, -1, -2147483648));
        atlas.put("/study/testargs2", RouteMeta.build(RouteType.ACTIVITY, TestArgs2Activity.class, "/study/testargs2", "study", new java.util.HashMap<String, Integer>(){{put("key", 8); }}, -1, -2147483648));
      }
    }

```




AOP
===
Android AOP就是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。

* APT。代表：DataBinding、Dagger2、ButterKnife、EventBus 、DBFlow、AndroidAnnotation。编译时期生成java文件依赖注入。
* AdpectJ。代表：Router里的拦截器。编译时期代码注入class文件。
* Javassist。代表：热修复框架HotFix、InstantRun。编译时期基于java反射的字节码注入。
* [三者区别](https://www.jianshu.com/p/dca3e2c8608a)
* 除此之外还有java的动态代理机制。Java 原生API，运行时期生成字节码注入到JVM里，但是只能hook接口。
* [总结](https://www.jianshu.com/p/e7df86693647)
* [Hunter、总结](http://quinnchen.me/2018/09/13/2018-09-13-asm-transform/)
